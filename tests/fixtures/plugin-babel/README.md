# Plugin-Babel Test Fixtures

This directory contains fixture-based test scenarios for the @soda-gql/plugin-babel package.

## Structure

```
tests/fixtures/plugin-babel/
├── operations/basic/     - GraphQL operations (query, mutation, subscription)
├── models/basic/         - GraphQL models with transformations
├── slices/basic/         - GraphQL slices (query/mutation slices)
├── imports/              - Import hygiene test scenarios
│   ├── add-runtime-import/
│   ├── remove-gql-import/
│   ├── preserve-gql-import/
│   ├── merge-runtime-import/
│   └── multiple-models/
└── errors/               - Error handling scenarios
    └── no-gql/
```

## Fixture Format

Each fixture directory contains:
- `source.ts` - TypeScript source code with gql definitions

**No hardcoded metadata** - The builder generates artifacts naturally from source files.

## Usage

Load fixtures in tests using the helper:

```typescript
import { loadPluginBabelFixture } from "../../utils/pluginBabelFixtures";

const fixture = await loadPluginBabelFixture("operations/basic");
// fixture.sourcePath - absolute path to source.ts
// fixture.sourceCode - content of source.ts
// fixture.artifact - BuilderArtifact generated by builder (not hardcoded)
```

## Testing Approach

Tests use these fixtures to verify **behavioral transformation**, not string output:

1. Load fixture - builder runs and generates artifact naturally
2. Run Babel transformation with generated artifact
3. Verify transformation behavior (not exact output format)
4. Optionally execute transformed code to verify runtime behavior

This approach follows the project's testing conventions:
- Fixture-based (not inline strings)
- Behavioral (not implementation details)
- Type-checked fixtures for refactoring support
- **Artifacts generated by builder, not mocked**
